(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,n){e.exports=n(46)},26:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),l=n(16),o=n.n(l),u=(n(26),n(5)),i=n(2),s=n(17),m=n(7),d=function(e){var t=e.ps;return c.a.createElement("span",{className:"word-pieces"},t.map((function(e,t){return c.a.createElement(f,{wp:e,key:t})})))},f=function(e){var t=e.wp;if("string"===typeof t)return c.a.createElement("ruby",null,t);var n=t.text,a=t.kana;return c.a.createElement("ruby",null,n," ",c.a.createElement("rt",null,a)," ")},p=function(e){var t=e.desc;return c.a.createElement(c.a.Fragment,null,t.split("\n").map((function(e,t){return c.a.createElement("p",{key:t},e)})))},v=n(18),E=n.n(v),b=(n(30),function(e){var t=e.tag,n=e.onDelete;return c.a.createElement("div",{className:"word-tag"},t.name,c.a.createElement("span",{className:"word-tag-del",onDoubleClick:n},"\u2715"))}),w=function(e){var t=e.tags,n=e.onDelete,a=e.onAddition;return c.a.createElement(E.a,{tags:t.map((function(e){return{id:e,name:e}})),onDelete:n,onAddition:a,allowNew:!0,allowBackspace:!1,tagComponent:b,autoResize:!0,placeholderText:"       "})},h=(n(31),n(32),function(e){var t=e.children,n=Object(i.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)(!1),u=Object(i.a)(o,2),s=u[0],m=u[1];return c.a.createElement("div",{className:s?"tooltip-wrapper active":"tooltip-wrapper"},c.a.createElement("div",{className:s?"tooltip-ele active":"tooltip-ele",onClick:function(){return m(!s)}},a),c.a.createElement("div",{className:"tooltip-tooltip"},l))}),j=(n(33),function(e){var t=e.icon;return c.a.createElement("i",Object.assign({},e,{className:"fa fa-".concat(t),"aria-hidden":"true"}))}),O=n(1);!function(e){e[e.Character=0]="Character",e[e.LParen=1]="LParen",e[e.RParen=2]="RParen"}(a||(a={}));var k,y=Object(O.buildLexer)([[!0,/^[^()]/g,a.Character],[!0,/^\(/g,a.LParen],[!0,/^\)/g,a.RParen]]),N=Object(O.apply)(Object(O.tok)(a.Character),(function(e){return e.text})),g=Object(O.apply)(Object(O.rep_sc)(N),(function(e){return e.join("")})),x=Object(O.kmid)(Object(O.str)("("),g,Object(O.str)(")")),C=Object(O.apply)(Object(O.seq)(N,Object(O.opt_sc)(x)),(function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return a?{text:n,kana:a}:n})),D=Object(O.apply)(Object(O.seq)(C,Object(O.rep_sc)(C)),(function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return[n].concat(Object(u.a)(a))}));!function(e){e[e.Number=0]="Number",e[e.Add=1]="Add",e[e.Sub=2]="Sub",e[e.Mul=3]="Mul",e[e.Div=4]="Div",e[e.LParen=5]="LParen",e[e.RParen=6]="RParen",e[e.Space=7]="Space",e[e.kana=8]="kana"}(k||(k={}));var S=function(e){var t=e.addWord;return c.a.createElement("div",{className:"header"},c.a.createElement(W,{addWord:t}),c.a.createElement(R,null))},W=function(e){var t=e.addWord;return c.a.createElement("div",{className:"header-buttons"},c.a.createElement(h,null,c.a.createElement("button",{className:"add"},c.a.createElement(j,{icon:"plus"})),c.a.createElement(P,{addWord:t})))},P=function(e){var t=e.addWord,n=Object(r.useState)([]),a=Object(i.a)(n,2),l=a[0],o=a[1],s=Object(r.useRef)(),m=Object(r.useRef)(),d=Object(r.useState)(!1),f=Object(i.a)(d,2),p=f[0],v=f[1];return c.a.createElement("div",{className:"newword-form"},c.a.createElement(w,{tags:l,onDelete:function(e){o(l.filter((function(t,n){return n!==e})))},onAddition:function(e){o([].concat(Object(u.a)(l),[e.name]))}}),c.a.createElement("div",{className:"label"},"Word"),c.a.createElement("input",{onKeyDown:function(e){if("Escape"===e.key){var t=m.current.selectionStart;if(null!==t){var n=m.current.value;m.current.value=n.slice(0,t)+"()"+n.slice(t),m.current.selectionStart=t+1,m.current.selectionEnd=t+1}}v(!1)},ref:m,type:"text",className:p?"word-input error":"word-input",placeholder:"e.g. \u898b(\u307f)\u308b. Press [Esc] to insert ()"}),c.a.createElement("div",{className:"label"},"Definition"),c.a.createElement("textarea",{ref:s}),c.a.createElement("button",{className:"save",onClick:function(){try{var e=(a=m.current.value,Object(O.expectSingleResult)(Object(O.expectEOF)(D.parse(y.parse(a.trim()))))),n=s.current.value;t({content:e,description:n,tags:l}).then((function(){m.current.value="",s.current.value=""}))}catch(r){v(!0)}var a}},c.a.createElement(j,{icon:"save"})))},R=function(){return c.a.createElement("div",{className:"header-query"},c.a.createElement("input",{type:"text",spellCheck:!1,placeholder:"Input query..."}),c.a.createElement("span",{className:"icon"},c.a.createElement(j,{icon:"search"})))},A=(n(39),n(3)),I=n.n(A),L=n(4),F=n(19),q=n.n(F).a.createInstance({name:"vocabulary"});function B(e,t){return K.apply(this,arguments)}function K(){return(K=Object(L.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.setItem(t,n);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(L.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now().toString(),a=Object(m.a)(Object(m.a)({},t),{},{reviewtime:1,lastreview:new Date}),e.next=4,B(n,a);case 4:return e.abrupt("return",{key:n,value:a});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return J.apply(this,arguments)}function J(){return(J=Object(L.a)(I.a.mark((function e(t,n){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,q.getItem(t);case 3:return e.t1=e.sent,a=(0,e.t0)(e.t1),e.next=7,B(t,a);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(L.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return e.reviewtime+=1,e.lastreview=new Date,e},e.next=3,_(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(L.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=t||function(){return!0},e.next=4,q.iterate((function(e,t){a(e)&&n.push({key:t,value:e})}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(L.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.removeItem(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=n(20),H=n.n(G),Q=(n(43),function(e){var t=e.content,n=e.onClose;return null===t?c.a.createElement(c.a.Fragment,null):c.a.createElement("div",{className:"modal",onKeyDown:function(e){"Escape"===e.key&&n()}},c.a.createElement("div",{className:"modal-content"},t))}),U=(n(44),function(e){var t=e.word,n=e.onClose,a=null===t?null:c.a.createElement(V,e);return c.a.createElement(Q,{content:a,onClose:n})}),V=function(e){var t=e.word,n=e.prevWord,a=e.nextWord,l=e.onClose,o=e.review,u=e.index,i=t.value,s=i.content,m=i.description,f=i.tags,v=i.lastreview,E=i.reviewtime,b=t.reviewed,w=u.widx,h=u.length,O=w>0,k=w<h-1,y=function(e,t){return t+(e?" disabled":"")},N=H()(v).fromNow(),g=Object(r.useRef)(null);Object(r.useEffect)((function(){var e;null===(e=g.current)||void 0===e||e.focus()}),[]);return c.a.createElement("div",{className:b?"wordcard-wrapper reviewed":"wordcard-wrapper",onKeyDown:function(e){switch(e.key){case"a":n();break;case"s":o();break;case"d":a()}},tabIndex:0,ref:g},c.a.createElement("button",{className:"close",onClick:l},"\xd7"),c.a.createElement("div",{className:"info"},"Reviewed ",N),c.a.createElement("div",{className:"wordcard-nav"},c.a.createElement("div",{className:"wordcard"},c.a.createElement("div",{className:"content"},c.a.createElement(d,{ps:s})),c.a.createElement("div",{className:"tags"},f.map((function(e,t){return c.a.createElement("span",{key:t},e)}))),c.a.createElement("div",{className:"description"},c.a.createElement(p,{desc:m})),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{title:"S",disabled:b,onClick:o},"Review ",E))),c.a.createElement("div",{className:y(O,"nav-left"),onClick:n,title:"A"},c.a.createElement(j,{icon:"chevron-left"})),c.a.createElement("div",{className:y(k,"nav-right"),onClick:a,title:"D"},c.a.createElement(j,{icon:"chevron-right"})),c.a.createElement("div",{className:"index"},w+1," / ",h)))};function X(e){return Object(m.a)(Object(m.a)({},e),{},{reviewed:!1})}var Y=function(e){Object(s.a)(e);var t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)(""),m=Object(i.a)(o,2),d=(m[0],m[1],Object(r.useState)(null)),f=Object(i.a)(d,2),p=f[0],v=f[1],E=Object(r.useState)(!1),b=Object(i.a)(E,2),w=b[0],h=b[1];Object(r.useEffect)((function(){(function(e){return z.apply(this,arguments)})().then((function(e){return l(e.map(X))}))}),[]);var j=function(e){null===e?v(null):0<=e&&e<a.length&&v(e)},O=function(e){return function(){(function(e){return $.apply(this,arguments)})(a[e].key).then((function(){l(a.filter((function(t,n){return e!==n})))}))}},k=function(e){if(null!==e&&!a[e].reviewed){var t=a[e].key;(function(e){return T.apply(this,arguments)})(t).then((function(n){a[e]={key:t,value:n,reviewed:!0},h(!w)}))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"vocabulary"},c.a.createElement(S,{addWord:function(e){return function(e){return M.apply(this,arguments)}(e).then((function(e){return l([X(e)].concat(Object(u.a)(a)))}))}}),c.a.createElement("table",{className:"word-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Word"),c.a.createElement("th",null,"Description"),c.a.createElement("th",null,"Tags"))),c.a.createElement("tbody",null,a.map((function(e,t){return c.a.createElement(Z,{word:e,key:e.key,activate:function(){j(t)},del:O(t),review:function(){return k(t)}})}))))),null!==p?c.a.createElement(U,{onClose:function(){j(null)},nextWord:function(){j(p+1)},prevWord:function(){j(p-1)},review:function(){return k(p)},word:a[p],index:{widx:p,length:a.length}}):c.a.createElement(c.a.Fragment,null))},Z=function(e){var t=e.word,n=e.activate,a=e.del,l=e.review,o=t.value,s=o.content,m=o.tags,f=o.description,p=t.reviewed,v=Object(r.useState)(m),E=Object(i.a)(v,2),b=E[0],h=E[1];return c.a.createElement("tr",{onClick:n,className:p?"reviewed":""},c.a.createElement("td",null,c.a.createElement(d,{ps:s})),c.a.createElement("td",null,f),c.a.createElement("td",{valign:"top",onClick:function(e){return e.stopPropagation()}},c.a.createElement(w,{onAddition:function(e){h([].concat(Object(u.a)(b),[e.name]))},onDelete:function(e){h(b.filter((function(t,n){return n!==e})))},tags:b})),c.a.createElement("td",{onClick:function(e){return e.stopPropagation()}},c.a.createElement(ee,{del:a,review:l,reviewed:p})))},ee=function(e){var t=e.del,n=e.review,a=e.reviewed;return c.a.createElement("div",{className:"controls"},c.a.createElement("button",{className:"edit"},c.a.createElement(j,{icon:"pen-alt"})),c.a.createElement("button",{className:"review",onClick:n},c.a.createElement(j,{icon:a?"book-open":"book"})),c.a.createElement("button",{className:"delete",onDoubleClick:t},c.a.createElement(j,{icon:"trash-alt"})))};n(45);var te=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(Y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.738bdd73.chunk.js.map